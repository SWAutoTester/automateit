<?xml version='1.0'?>
<project name="Automate It! Test Automation Framework" default="jar" basedir=".">
    
  <taskdef resource="testngtasks" classpath="./lib/testng-6.0.1-nobsh-noguice.jar"/>
    
  <!--////////////////////////////////////////////////////-->
  <!--// Identify properties                            //-->
  <!--////////////////////////////////////////////////////-->
  <property name="classes" value="classes"/>
  <property name="dist" value="dist"/>
  <property name="docs" value="docs"/>
  <property name="api" value="api"/>
  <property name="src" value="src"/>
  <property name="lib" value="lib"/>
  <property name="results" value="results"/>
  
  <!--////////////////////////////////////////////////////-->
  <!--// Create necessary directories                   //-->
  <!--////////////////////////////////////////////////////-->
  <target name="mkdirs" depends="clean">
    <mkdir dir="${classes}"/>
    <mkdir dir="${dist}"/>
    <mkdir dir="${docs}"/>
    <mkdir dir="${docs}/${api}"/>
  </target>

  <!--////////////////////////////////////////////////////-->
  <!--// Build the code                                 //-->
  <!--////////////////////////////////////////////////////-->
  <target name="compile" depends="mkdirs">
      <javac srcdir="${src}" destdir="${classes}">
          <classpath>
              <fileset dir="${lib}">
                  <include name="**/*.jar"/>
              </fileset>
          </classpath>
      </javac>
  </target>
  
  <!--////////////////////////////////////////////////////-->
  <!--// Create Java archive (jar) file of the          //-->
  <!--// automated test code                            //-->
  <!--////////////////////////////////////////////////////-->  
  <target name="jar" depends="compile">
      <jar destfile="${dist}/automateit.jar" basedir="${classes}" />  
  </target>
  
  <!--////////////////////////////////////////////////////-->
  <!--// Clean task                                     //-->
  <!--////////////////////////////////////////////////////-->
  <target name="clean" description="Clean all components">
      <echo message="Deleting classes/com/" /> 
      <delete dir="${classes}/${org}/" />
      <delete dir="${docs}/${api}" />
      <delete dir="${dist}" />
  </target>
  
  <!--////////////////////////////////////////////////////-->
  <!--// Create javadocs                                //-->
  <!--////////////////////////////////////////////////////-->
  <target name="javadoc" description="Create API javadoc">
      <javadoc
           destdir="${docs}/${api}"
           author="true"
           version="true"
           use="true"
           windowtitle="AutomateIt! Test Automation Framework API">

           <fileset dir="${src}" defaultexcludes="yes">
                <include name="org/automateit/**"/>
           </fileset>
           <classpath>
              <fileset dir="${lib}">
                  <include name="**/*.jar"/>
              </fileset>
          </classpath>
      </javadoc>
   </target>
   
   <target name="example" depends="jar">
      <testng outputdir="results/" groups="example" useDefaultListeners="false" listeners="org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter,org.automateit.testng.SeleniumCommandCaptureListener,org.automateit.testng.SeleniumScreenCaptureListener">
      <!--//<testng outputdir="results/" groups="example" useDefaultListeners="false" listeners="org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter">//-->
          <classpath>
              <fileset dir="${lib}">
                  <include name="**/*.jar"/>
              </fileset>
              <fileset dir="${dist}">
                  <include name="**/*.jar"/>
              </fileset>
	  </classpath>
	  <classfileset dir="${classes}" includes="**/*.class" />
      </testng>
  </target>

</project>